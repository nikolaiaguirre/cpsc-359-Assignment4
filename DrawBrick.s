//.section    .init
//.globl     _start

//_start:
   // b       drawBrick
    
.section .text
.globl drawBrick
drawBrick:
	push	{r4-r10, lr}
	mov 	r5, r0
	mov	r6, r1
   	 mov     sp, #0x8000
	bl		EnableJTAG
	bl		InitFrameBuffer
	
DrawLoop:

	chAdr		.req	r4
	px		.req	r5
	py		.req	r6
	column		.req	r7
	ldr		chAdr,	=brick		
	lsl		px, #5
	mov		r9, px
	lsl		py, #5
	add		r10, px, #32
	add		r8, py, #32
				
charLoop$:
	mov		px,		r9				

rowLoop$:
	cmp		px,		r10		
	beq		nextRow

	mov		r0,		px
	mov		r1,		py
	ldrh		r2,		[chAdr], #2		
	bl		DrawPixel			
	add		px,		#1			
	bl		rowLoop$
nextRow:
	add		py,		#1			
	cmp		py, r8
	beq		end
	bl		charLoop$

end:
	.unreq	chAdr
	.unreq	px
	.unreq	py
	.unreq	column
	pop		{r4-r10, lr}
	bx		lr
	//b	haltLoop$
.section .data

.align 4
brick:
.ascii "\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20"
.ascii "\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20"
.ascii "\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\253\203\253\203"
.ascii "\253\203\253\203\253\203\253\203o[o[o[o[o[o[o[o[o[o[o[\6\20"
.ascii "\6\20\6\20\253\203\253\203\253\203o[o[o[o[o[o[\6\20\6\20\253\203"
.ascii "\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S"
.ascii "\15S\15S\15So[\6\20\253\203\15S\15S\15S\15S\15S\15S\15S\15S"
.ascii "\15So[\6\20\15S\15S\15S\15S\15S\320k\320k\320ko[o[o[o[o[o["
.ascii "\15S\15S\15S\15S\15S\6\20\15S\15S\15S\15S\320k\320k\320k\15S"
.ascii "\15S\15S\15S\6\20\15S\15S\15S\320k\320ko[\320ko[o[o[o[o[o[o["
.ascii "\314J\314J\15S\15S\15S\6\20\15S\15S\320k\320ko[\320ko[o[\314J"
.ascii "\15S\15S\6\20\15S\15S\15S\320ko[\320ko[\320ko[o[o[o[\314J\314J"
.ascii "\314J\314J\15S\15S\15S\6\20\15S\15S\320ko[\320ko[o[\314J\314J"
.ascii "\15S\15S\6\20\15S\15S\15So[\320ko[o[o[o[\314J\314J\314J\314J"
.ascii "\314J\314J\314J\15S\15S\15S\6\20\15S\15So[\320ko[o[\314J"
.ascii "\314J\314J\15S\15S\6\20\15S\15S\15S\15S\15S\314J\314J\314J\314J"
.ascii "\314J\314J\314J\314J\314J\15S\15S\15S\15S\15S\6\20\15S\15S"
.ascii "\15S\15S\314J\314J\314J\15S\15S\15S\15S\6\20\3071\15S\15S\15S"
.ascii "\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\3071"
.ascii "\6\20\3071\15S\15S\15S\15S\15S\15S\15S\15S\15S\3071\6\20\6\20"
.ascii "\3071\3071\3071\3071\3071\3071\3071\3071\3071\3071\3071\3071"
.ascii "\3071\3071\3071\3071\3071\6\20\6\20\6\20\3071\3071\3071\3071"
.ascii "\3071\3071\3071\3071\3071\6\20\6\20\6\20\6\20\6\20\6\20\6\20"
.ascii "\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20"
.ascii "\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20"
.ascii "\6\20\6\20\253\203\253\203o[o[o[o[o[o[o[\6\20\6\20\6\20\253\203"
.ascii "\253\203\253\203\253\203\253\203o[o[o[o[o[o[o[o[o[o[o["
.ascii "o[\6\20\6\20\6\20\15S\15S\15S\15S\15S\15S\15S\15S\15So[\6\20"
.ascii "\253\203\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S"
.ascii "\15S\15S\15S\15So[\6\20\253\203\15S\15S\15S\320k\320k\320k\15S"
.ascii "\15S\15S\15S\6\20\15S\15S\15S\15S\15S\320k\320k\320ko[o[o["
.ascii "o[o[o[\15S\15S\15S\15S\15S\6\20\15S\15S\320k\320ko[\320ko[o["
.ascii "o[\15S\15S\6\20\15S\15S\15S\320k\320ko[\320ko[o[o[o[o[o[o[\314J"
.ascii "\314J\15S\15S\15S\6\20\15S\15S\320ko[\320ko[\320ko[o[\15S"
.ascii "\15S\6\20\15S\15S\15S\320ko[\320ko[\320ko[o[o[o[o[\314J\314J"
.ascii "\314J\15S\15S\15S\6\20\15S\15So[\320ko[o[o[o[\314J\15S\15S\6\20"
.ascii "\15S\15S\15So[\320ko[o[o[o[o[o[\314J\314J\314J\314J\314J"
.ascii "\15S\15S\15S\6\20\15S\15So[o[o[o[\314J\314J\314J\15S\15S\6\20"
.ascii "\15S\15S\15So[o[o[o[o[\314J\314J\314J\314J\314J\314J\314J\314J"
.ascii "\15S\15S\15S\6\20\15S\15S\15S\15S\314J\314J\314J\15S\15S\15S"
.ascii "\15S\6\20\15S\15S\15S\15S\15S\314J\314J\314J\314J\314J\314J"
.ascii "\314J\314J\314J\15S\15S\15S\15S\15S\6\20\15S\15S\15S\15S\15S"
.ascii "\15S\15S\15S\15S\15S\3071\6\20\3071\15S\15S\15S\15S\15S\15S"
.ascii "\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\3071\6\20\3071"
.ascii "\3071\3071\3071\3071\3071\3071\3071\3071\3071\6\20\6\20\6\20"
.ascii "\3071\3071\3071\3071\3071\3071\3071\3071\3071\3071\3071\3071"
.ascii "\3071\3071\3071\3071\3071\6\20\6\20\6\20\6\20\6\20\6\20\6\20"
.ascii "\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20"
.ascii "\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20"
.ascii "\6\20\6\20\6\20\6\20\6\20\6\20\253\203\253\203\253\203\253\203"
.ascii "\253\203\253\203\253\203o[o[o[o[o[o[o[o[o[o[\6\20\6\20\6\20"
.ascii "\253\203\253\203\253\203o[o[o[o[o[o[\6\20\6\20\253\203\15S\15S"
.ascii "\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S"
.ascii "o[\6\20\253\203\15S\15S\15S\15S\15S\15S\15S\15S\15So[\6\20"
.ascii "\15S\15S\15S\15S\15S\320k\320k\320ko[o[o[o[o[o[\15S\15S\15S"
.ascii "\15S\15S\6\20\15S\15S\15S\15S\320k\320k\320k\15S\15S\15S\15S"
.ascii "\6\20\15S\15S\15S\320k\320ko[\320ko[o[o[o[o[o[o[\314J\314J\15S"
.ascii "\15S\15S\6\20\15S\15S\320k\320ko[\320ko[o[o[\15S\15S\6\20\15S"
.ascii "\15S\15S\320ko[\320ko[\320ko[o[o[o[o[\314J\314J\314J\15S\15S"
.ascii "\15S\6\20\15S\15S\320ko[\320ko[o[o[\314J\15S\15S\6\20\15S"
.ascii "\15S\15So[\320ko[o[o[o[o[o[\314J\314J\314J\314J\314J\15S\15S"
.ascii "\15S\6\20\15S\15So[\320ko[o[o[\314J\314J\15S\15S\6\20\15S\15S"
.ascii "\15S\15S\15So[o[o[o[\314J\314J\314J\314J\314J\15S\15S\15S\15S"
.ascii "\15S\6\20\15S\15S\15S\15So[o[\314J\15S\15S\15S\15S\6\20\3071"
.ascii "\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S\15S"
.ascii "\15S\15S\3071\6\20\3071\15S\15S\15S\15S\15S\15S\15S\15S\15S"
.ascii "\3071\6\20\6\20\3071\3071\3071\3071\3071\3071\3071\3071\3071"
.ascii "\3071\3071\3071\3071\3071\3071\3071\3071\6\20\6\20\6\20\3071"
.ascii "\3071\3071\3071\3071\3071\3071\3071\3071\6\20\6\20\6\20\6\20"
.ascii "\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20"
.ascii "\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20\6\20"
.ascii "\6\20\6\20\6\20\6\20\6\20"
